---
title: 자바스크립트 기본 정리 04 - 함수 function, 스코프 Scope
date: 2018-10-23 16:43:11
tags:
---

1.  큰 프로그램을 잘게 쪼개어 특정 코드 뭉치를 반복해서 사용할 수 있도록 묶어놓은 코드 뭉치의 단위를 `함수`라 한다.

```javascript
// 함수 정의
function add(x, y){ // add : 함수 이름,  x·y : 매개변수(parameter)
    const result = x + y;
    return result; // 반환값
}

// 함수 호출
add(2, 3) // 2·3 : 인수(argument)
```

1.  보통 코드가 쓰여진 순서대로 실행되지만, 여러가지 예외가 존재해서 코드의 실행 순서가 이리저리 옮겨다니기도 한다. 
1.  함수 호출도 그 중 하나로, 함수 호출 코드를 만나면 코드의 실행 흐름이 호출된 함수의 내부로 옮겨간다.

```javascript
// 1 - 함수 정의
function add(x, y){
    return x + y; // 3 - 함수 실행 
}
// 2 - 함수 호출
const result = add(2, 3);
// 4 - 나머지 코드 실행
console.log(result);
```

1.  위 코드 실행 흐름
    1. 함수가 정의된다.
    1. 함수를 호출하는 코드를 읽고
    1. 함수 내부의 코드가 실행된다.
    1. 나머지 코드가 실행된다.

    
1. 매개변수는 바깥에서 선언된 변수와는 관계없는 독립적인 변수이다. 

```javascript
function reassign(x) { 
    // 인수에 무슨 값을 넣든 함수 내에서 x = 2 로 정의되었기 때문에 2가 반환된다.
  x = 2;
  return x;
}

const y = 1;
const result = reassign(y);
// 함수 호출 시 인수가 들어갈 자리에 변수를 써주고, 함수 내부에서 매개변수에 새로운 값을 대입한다고 하더라도 인수로 써준 변수의 값(y)이 변경되지 않는다.

console.log(y); // 1
console.log(result); // 2
```

1. `return` 키워드 바로 다음에 오는 값이 함수 호출의 결과값으로 반환되며, 반환되는 즉시 함수 실행이 끝난다.  `return` 뒤에 아무값도 써주지 않거나, 아예 `return` 구문을 쓰지 않으면 함수는 `undefinde` 값을 반환한다.

---

1. 코드는 일정 범위 안에서만 유효하다.

1. 특정 변수가 유효한 코드 상의 유효범위를 **스코프 Scope** 라고 한다.

1. 매개변수는 **함수 스코프**를 갖는다.

1. 함수 내부 코드에서 매개변수 혹은 그 함수 안에서 정의된 변수만 사용 가능한것은 아니고, 바깥 스코프에 정의된 변수도 사용 가능하다.

1. 식별자와 같은 이름을 찾을때까지 바깥스코프로 올라가는데 이 과정을 **스코프 연쇄 scope chain** 이라고 한다.

1. 가장 바깥에 있는 스코프를 최상위 스코프 혹은 **전역 스코프 global scope**라고 한다.


```javascript
const x = 3;

function add5(x) { // `x`라는 변수가 다시 정의됨
function add(x, y) { // `x`라는 변수가 다시 정의됨
    return x + y;
}
return add(x, 5);
}

add5(x);
```

- 위와 같이 바깥 쪽 스코프에 존재하는 변수와 같은 이름을 갖는 변수를 안쪽 스코프에서 재정의 할 수 있다. 그렇게 되면 안쪽 스코프에서는 바깥쪽 스코프에 있는 이름들이 **무시**된다. 이런 현상을 **변수가리기 variable shadowing**이라고 한다.

---

1. 함수도 값이다.
    - 값으로 사용할 수 있는 자바스크립트의 함수는 **1급시민**이다.
    - 1급시민인 함수를 줄여서 **1급함수**라 부른다.

1. 함수를 선언한 뒤 변수에 대입해서 호출할 수 있다.

1. 배열이나 객체에 넣을 수 있다.

1. 함수를 다른 함수에 인수로 넘길 수 있다.

1. 함수에서 함수를 반환할 수 있다.

```javascript
// 1 - 함수를 배열이나 객체에 넣기
function add(x, y){
    return x + y;
}
[add];
{addFunc:add}

// 2 - 함수를 인수로 넘기기
function isEven(x){
    return x % 2 === 0;
}
[1,2,3,4,5].filter(isEven); 

// 3 - 함수에서 함수 반환하기
function createEmptyFunc(){
    function func(){}
    return func
}
```

---

1. 함수를 선언할 때는 이름을 붙이지 않아도 되고, 이렇게 이름이 없는 함수를 **익명 함수 (anonymous function)**, 혹은 함수 리터럴 (function literal)이라고 한다.

1. 익명 함수는 이름이 없기 때문에 이름으로 호출 할 수 없다.

1. 호출을 하려면 변수에 저장한 후에 변수의 이름을 통해 호출해야 한다.

    ```javascript
    // 변수에 저장한 후 변수의 이름을 통해 호출
    const add = function(x, y){
        return x + y;
    }
    add(1, 2) // 3
    ```

1. 익명 함수는 함수를 만든 쪽이 아니라 다른 쪽에서 그 함수를 호출할 때 많이 사용된다.

1. 대표적인 경우는 함수를 인수로 넘겨줄 때 이다.

1. 예를들어 `filter` 메소드에 필터링 할 조건을 표현하는 함수를 넣어주면 `filter` 메소드쪽에서 각 요소에 대해 함수를 호출한 뒤 `true` 를 반환한 요소만을 필터링해서 반환한다.

    ```javascript
    [1, 2, 3, 4, 5].filter(function (x){
        return x % 2 === 0;
    }); // [2, 4]
    ```

-----

1. **화살표 함수**는 함수 정의를 위한 새로운 표기법이다

1. 중괄호로 둘러주지 않으면 `return`구문이 없어도 바로 반환된다.

    ```javascript    
    // 여기서 x + y는 바로 반환된다.
    const add = (x, y) => x + y;
    add(2, 1) // 3
    ```

1. `function` 키워드를 통한 함수 정의처럼 여러 구문을 사용하려면 중괄호로 둘러싸주어야한다. 
`=>` 다음 부분을 중괄호로 둘러싸면, 명시적으로 `return`을 하지 않는 한 아무것도 반환되지 않는다.

    ```javascript
    const add = (x, y) => {
        const result = x + y;
        return result;
    }
    add(2, 3) // 5
    ```

1. 매개변수가 하나밖에 없다면 매개변수 부분의 괄호를 쓰지 않아도 된다.

    ```javascript
    const negate = x => !x;
    negate(1) // false
    negate(0) // true : 0은 falsy
    negate('') // true : 빈문자열은 falsy
    ```

1. 화살표 함수는 표기법이 간단하기 때문에 익명 함수를 다른 함수의 인수로 넘길 때 주로 사용된다.

    ```javascript
    [1, 2, 3, 4, 5].filter(x => x % 2 === 0) // [2, 4]
    ```